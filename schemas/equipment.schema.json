{
		"$schema": "https://json-schema.org/draft/2020-12/schema",
		"title": "Equipment Metadata Schema",
		"$comment": "See docs/runbooks/context_summary.md#structure-is-separate-from-content",
	"type": "object",
	"description": "Definitions of all equipment and items, indexed by name.",
	"$defs": {
		"entry": {
			"type": "object",
			"required": ["type", "rarity", "canon", "source_ref"],
			"properties": {
				"type": {
					"type": "string",
					"description": "Category of item: gear, usable, consumable, ingredient"
				},
				"subtype": {
					"type": "string",
					"description": "Optional refinement, e.g. 'weapon', 'armor', 'tool', 'potion', 'herb', etc."
				},
				"rarity": {
					"type": "string",
					"enum": ["Inferior", "Common", "Uncommon", "Rare", "Epic", "Legendary", "Unique"]
				},
				"description": {
					"type": "string",
					"description": "System description of the item's function or effect"
				},
				"flavor": {
					"$ref": "https://primal-hunter.local/schemas/shared/flavor.schema.json#/$defs/flavor"
				},
				"effects": {
					"type": "object",
					"description": "Any bonuses, stat gains, skill grants, or healing effects",
					"properties": {
							"stat_bonus": {
								"type": "object",
								"patternProperties": {
									".+": { "type": "number" }
								},
								"description": "Flat stat increases (e.g., 'Str': 2)",
								"additionalProperties": false
							},
						"grants_skills": {
							"type": "array",
							"description": "Skills temporarily or passively granted by item",
							"items": { "type": "string" }
						},
						"healing": {
							"type": "object",
							"properties": {
								"HP": { "type": "number" },
								"Stamina": { "type": "number" },
								"MP": { "type": "number" }
							},
							"additionalProperties": false
						}
					},
					"additionalProperties": false
				},
				"uses": {
					"type": "integer",
					"description": "Number of times the item can be used (optional for consumables)"
				},
				"equippable_slot": {
					"type": "string",
					"description": "Slot used if equippable (e.g., 'chest', 'head', 'main_hand', etc.)"
				},
					"tags": {
						"oneOf": [
							{
								"$ref": "https://primal-hunter.local/schemas/shared/tags.schema.json"
							},
							{
								"type": "array",
								"items": { "type": "string" },
								"uniqueItems": true
							}
						]
					},
				"granted_by": {
					"$ref": "https://primal-hunter.local/schemas/shared/granted_by.schema.json#/$defs/granted_by"
				},
				"canon": {
					"type": "boolean",
					"description": "Whether this item entry asserts canon facts requiring provenance."
				},
				"source_ref": {
					"$ref": "https://primal-hunter.local/schemas/shared/provenance.schema.json#/$defs/source_ref"
				}
			},
			"additionalProperties": false
		}
	},
	"patternProperties": {
		"^.+$": {
			"$ref": "#/$defs/entry"
		}
	},
	"additionalProperties": false
}
